<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚¯ã‚¤ã‚ºãƒ“ãƒ«ãƒ€ãƒ¼</title>
  
  <style>
    /* =====================================
       ãƒªã‚»ãƒƒãƒˆï¼†åŸºæœ¬è¨­å®š
       ===================================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      height: 100vh;
      overflow: hidden;
    }
    
    /* =====================================
       3ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
       ===================================== */
    .builder-container {
      display: flex;
      height: 100vh;
    }
    
    /* å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
    .sidebar-left {
      width: 250px;
      background-color: #2c3e50;
      color: white;
      display: flex;
      flex-direction: column;
    }
    
    /* ä¸­å¤®ã‚¨ãƒªã‚¢ */
    .main-area {
      flex: 1;
      background-color: #ecf0f1;
      display: flex;
      flex-direction: column;
    }
    
    /* å³ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
    .sidebar-right {
      width: 400px;
      background-color: #34495e;
      color: white;
      display: flex;
      flex-direction: column;
    }
    
    /* =====================================
       å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼
       ===================================== */
    .sidebar-header {
      padding: 20px;
      background-color: #1a252f;
      border-bottom: 1px solid #34495e;
    }
    
    .sidebar-header h1 {
      font-size: 20px;
      margin-bottom: 5px;
    }
    
    .sidebar-header .version {
      font-size: 12px;
      color: #95a5a6;
    }
    
    .sidebar-tabs {
      display: flex;
      flex-direction: column;
      padding: 10px;
      gap: 5px;
    }
    
    .tab-button {
      padding: 15px;
      background-color: transparent;
      border: none;
      color: white;
      text-align: left;
      cursor: pointer;
      border-radius: 5px;
      font-size: 14px;
      transition: background-color 0.3s;
    }
    
    .tab-button:hover {
      background-color: #34495e;
    }
    
    .tab-button.active {
      background-color: #3498db;
    }
    
    .tab-button i {
      margin-right: 10px;
    }
    
    /* =====================================
       ä¸­å¤®ã‚¨ãƒªã‚¢
       ===================================== */
    .main-header {
      padding: 20px;
      background-color: white;
      border-bottom: 2px solid #bdc3c7;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .main-header h2 {
      font-size: 24px;
      color: #2c3e50;
    }
    
    .action-buttons {
      display: flex;
      gap: 10px;
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
      transition: all 0.3s;
    }
    
    .btn-primary {
      background-color: #3498db;
      color: white;
    }
    
    .btn-primary:hover {
      background-color: #2980b9;
    }
    
    .btn-success {
      background-color: #2ecc71;
      color: white;
    }
    
    .btn-success:hover {
      background-color: #27ae60;
    }
    
    .main-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* =====================================
       å³ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
       ===================================== */
    .preview-header {
      padding: 15px;
      background-color: #2c3e50;
      border-bottom: 1px solid #34495e;
    }
    
    .preview-header h3 {
      font-size: 18px;
    }
    
    .preview-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background-color: #f8f9fa;
    }
    
    #preview-area {
      background: white;
      border-radius: 8px;
      padding: 20px;
      min-height: 300px;
    }
    
    /* =====================================
       ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ï¼ˆä»®ã®å†…å®¹ï¼‰
       ===================================== */
    .placeholder {
      text-align: center;
      padding: 60px 20px;
      color: #7f8c8d;
    }
    
    .placeholder h3 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    
    .placeholder p {
      font-size: 14px;
    }
    
    /* =====================================
       å•é¡Œãƒªã‚¹ãƒˆ
       ===================================== */
    .question-items {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .question-item {
      background: white;
      border: 2px solid #bdc3c7;
      border-radius: 8px;
      padding: 15px;
      transition: all 0.3s;
    }
    
    .question-item:hover {
      border-color: #3498db;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .question-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .question-type {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
    }
    
    .type-choice {
      background-color: #3498db;
      color: white;
    }
    
    .type-text {
      background-color: #2ecc71;
      color: white;
    }
    
    .question-id {
      color: #95a5a6;
      font-size: 12px;
    }
    
    .question-text {
      font-size: 16px;
      color: #2c3e50;
      margin-bottom: 10px;
      font-weight: 500;
    }
    
    .question-actions {
      display: flex;
      gap: 5px;
    }
    
    .btn-icon {
      padding: 8px 12px;
      background: transparent;
      border: 1px solid #bdc3c7;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.3s;
    }
    
    .btn-icon:hover:not(:disabled) {
      background-color: #ecf0f1;
      border-color: #3498db;
    }
    
    .btn-icon:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }
    
    .add-question-area {
      margin-top: 20px;
    }
    
    .btn-block {
      width: 100%;
    }
    
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #7f8c8d;
    }
    
    .empty-state h3 {
      font-size: 24px;
      margin-bottom: 10px;
      color: #2c3e50;
    }
    
    .empty-state p {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div class="builder-container">
    <!-- =====================================
         å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼
         ===================================== -->
    <aside class="sidebar-left">
      <div class="sidebar-header">
        <h1>ğŸ“ ã‚¯ã‚¤ã‚ºãƒ“ãƒ«ãƒ€ãƒ¼</h1>
        <div class="version">Version 1.0 MVP</div>
      </div>
      
      <nav class="sidebar-tabs">
        <button class="tab-button active" data-tab="questions">
          ğŸ“‹ å•é¡Œç®¡ç†
        </button>
        <button class="tab-button" data-tab="upload">
          ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
        </button>
        <button class="tab-button" data-tab="design">
          ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š
        </button>
        <button class="tab-button" data-tab="export">
          ğŸ“¦ æ›¸ãå‡ºã—
        </button>
      </nav>
    </aside>
    
    <!-- =====================================
         ä¸­å¤®ã‚¨ãƒªã‚¢
         ===================================== -->
    <main class="main-area">
      <header class="main-header">
        <h2 id="current-tab-title">å•é¡Œç®¡ç†</h2>
        <div class="action-buttons">
          <button class="btn btn-primary" onclick="saveQuiz()">ğŸ’¾ ä¿å­˜</button>
          <button class="btn btn-success" onclick="previewQuiz()">â–¶ï¸ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
        </div>
      </header>
      
      <div class="main-content">
        <!-- å•é¡Œç®¡ç†ã‚¿ãƒ– -->
        <div id="tab-questions" class="tab-content active">
          <div id="question-list">
            <!-- ã“ã“ã«å•é¡Œãƒªã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ -->
          </div>
        </div>
        
        <!-- ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚¿ãƒ– -->
        <div id="tab-upload" class="tab-content">
          <div class="placeholder">
            <h3>ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿</h3>
            <p>CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¸€æ‹¬ã§å•é¡Œã‚’èª­ã¿è¾¼ã‚ã¾ã™</p>
          </div>
        </div>
        
        <!-- ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®šã‚¿ãƒ– -->
        <div id="tab-design" class="tab-content">
          <div class="placeholder">
            <h3>ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š</h3>
            <p>è‰²ã‚„ãƒ•ã‚©ãƒ³ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™</p>
          </div>
        </div>
        
        <!-- æ›¸ãå‡ºã—ã‚¿ãƒ– -->
        <div id="tab-export" class="tab-content">
          <div class="export-section">
            <h3>ğŸ“¦ WordPressç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãå‡ºã—</h3>
            <p>ä½œæˆã—ãŸã‚¯ã‚¤ã‚ºã‚’WordPressã§ä½¿ãˆã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</p>
            
            <div class="export-options">
              <!-- ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ç‰ˆ -->
              <div class="export-card">
                <div class="export-card-header">
                  <h4>â­ ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ç‰ˆï¼ˆãŠã™ã™ã‚ï¼‰</h4>
                  <span class="badge badge-success">åˆå¿ƒè€…å‘ã‘</span>
                </div>
                <p>HTML 1ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã§ã‚¯ã‚¤ã‚ºãŒå‹•ä½œã—ã¾ã™ã€‚WordPressã«ã‚³ãƒ”ãƒšã™ã‚‹ã ã‘ã§OKï¼</p>
                <button class="btn btn-success btn-block" onclick="exportAllInOne()">
                  ğŸ“¥ ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ç‰ˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
                </button>
              </div>
              
              <!-- åˆ†é›¢ç‰ˆ -->
              <div class="export-card">
                <div class="export-card-header">
                  <h4>ğŸ“‚ åˆ†é›¢ç‰ˆ</h4>
                  <span class="badge badge-info">ä¸­ç´šè€…å‘ã‘</span>
                </div>
                <p>HTMLã€CSSã€JavaScriptã‚’åˆ¥ã€…ã«ç®¡ç†ã—ãŸã„å ´åˆã«ä½¿ç”¨ã—ã¾ã™ã€‚</p>
                <button class="btn btn-primary btn-block" onclick="exportSeparate()">
                  ğŸ“¥ åˆ†é›¢ç‰ˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆ3ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
                </button>
              </div>
              
              <!-- ã¾ã¨ã‚ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ -->
              <div class="export-card">
                <div class="export-card-header">
                  <h4>ğŸ“¦ å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³</h4>
                </div>
                <p>ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ç‰ˆã¨åˆ†é›¢ç‰ˆã®ä¸¡æ–¹ã‚’ã¾ã¨ã‚ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</p>
                <button class="btn btn-primary btn-block" onclick="exportAll()">
                  ğŸ“¥ å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆ4ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
                </button>
              </div>
            </div>
            
            <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
            <div class="export-preview">
              <h4>ğŸ” ã‚¯ã‚¤ã‚ºæƒ…å ±</h4>
              <div class="quiz-info">
                <div class="info-item">
                  <span class="info-label">ã‚¿ã‚¤ãƒˆãƒ«:</span>
                  <span class="info-value" id="export-title">-</span>
                </div>
                <div class="info-item">
                  <span class="info-label">å•é¡Œæ•°:</span>
                  <span class="info-value" id="export-count">-</span>
                </div>
                <div class="info-item">
                  <span class="info-label">choiceå‹:</span>
                  <span class="info-value" id="export-choice-count">-</span>
                </div>
                <div class="info-item">
                  <span class="info-label">textå‹:</span>
                  <span class="info-value" id="export-text-count">-</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    
    <!-- =====================================
         å³ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
         ===================================== -->
    <aside class="sidebar-right">
      <div class="preview-header">
        <h3>ğŸ‘ï¸ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h3>
      </div>
      <div class="preview-content">
        <div id="preview-area">
          <div class="placeholder">
            <h3>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h3>
            <p>ã‚¯ã‚¤ã‚ºã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</p>
          </div>
        </div>
      </div>
</aside>
</div>

<!-- =====================================
     ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«
     ===================================== -->
<div id="edit-modal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 id="modal-title">å•é¡Œã‚’ç·¨é›†</h2>
      <button class="modal-close" onclick="closeEditModal()">âœ•</button>
    </div>
    
    <div class="modal-body">
      <form id="question-form">
        <!-- å•é¡Œã‚¿ã‚¤ãƒ—é¸æŠ -->
        <div class="form-group">
          <label>å•é¡Œã‚¿ã‚¤ãƒ—</label>
          <select id="edit-type" onchange="toggleQuestionType()">
            <option value="choice">4æŠã‚¯ã‚¤ã‚º</option>
            <option value="text">ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›</option>
          </select>
        </div>
        
        <!-- å•é¡Œæ–‡ -->
        <div class="form-group">
          <label>å•é¡Œæ–‡ <span class="required">*</span></label>
          <textarea id="edit-question" rows="3" placeholder="å•é¡Œæ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" required></textarea>
        </div>
        
        <!-- choiceå‹ã®å ´åˆã®é¸æŠè‚¢ -->
        <div id="choices-area">
          <div class="form-group">
            <label>é¸æŠè‚¢</label>
            <div class="choice-inputs">
              <div class="choice-input-row">
                <input type="text" id="edit-choice-0" placeholder="é¸æŠè‚¢1">
                <input type="radio" name="correct-answer" value="0">
              </div>
              <div class="choice-input-row">
                <input type="text" id="edit-choice-1" placeholder="é¸æŠè‚¢2">
                <input type="radio" name="correct-answer" value="1">
              </div>
              <div class="choice-input-row">
                <input type="text" id="edit-choice-2" placeholder="é¸æŠè‚¢3">
                <input type="radio" name="correct-answer" value="2">
              </div>
              <div class="choice-input-row">
                <input type="text" id="edit-choice-3" placeholder="é¸æŠè‚¢4">
                <input type="radio" name="correct-answer" value="3">
              </div>
            </div>
            <small>æ­£è§£ã®é¸æŠè‚¢ã®æ¨ªã®ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„</small>
          </div>
        </div>
        
        <!-- textå‹ã®å ´åˆã®æ­£è§£ -->
        <div id="text-answer-area" style="display: none;">
          <div class="form-group">
            <label>æ­£è§£ <span class="required">*</span></label>
            <input type="text" id="edit-text-answer" placeholder="æ­£è§£ã®æ–‡å­—åˆ—ã‚’å…¥åŠ›">
          </div>
        </div>
        
        <!-- è§£èª¬ -->
        <div class="form-group">
          <label>è§£èª¬ï¼ˆä»»æ„ï¼‰</label>
          <textarea id="edit-explanation" rows="3" placeholder="è§£èª¬ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆçœç•¥å¯ï¼‰"></textarea>
        </div>
      </form>
    </div>
    
    <div class="modal-footer">
      <button class="btn" onclick="closeEditModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn btn-primary" onclick="saveQuestion()">ä¿å­˜</button>
    </div>
  </div>
</div>

<!-- =====================================
     JavaScript
     ===================================== -->

<!-- ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ -->
<script src="assets/js/data.js"></script>
<script src="assets/js/builder.js"></script>
<script src="assets/js/export.js"></script>

<script>
  // =====================================
  // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
  // =====================================
  document.querySelectorAll('.tab-button').forEach(button => {
    button.addEventListener('click', function() {
      const tabName = this.dataset.tab;
      
      // å…¨ã¦ã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã‹ã‚‰ active ã‚’å‰Šé™¤
      document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚¿ãƒ–ã« active ã‚’è¿½åŠ 
      this.classList.add('active');
      
      // å…¨ã¦ã®ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éè¡¨ç¤º
      document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
      });
      
      // å¯¾å¿œã™ã‚‹ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
      document.getElementById('tab-' + tabName).classList.add('active');
      
      // ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ›´æ–°
      const titles = {
        'questions': 'å•é¡Œç®¡ç†',
        'upload': 'ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿',
        'design': 'ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š',
        'export': 'æ›¸ãå‡ºã—'
      };
      document.getElementById('current-tab-title').textContent = titles[tabName];
    });
  });
  
  // =====================================
  // ä¿å­˜ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³
  // =====================================
  function saveQuiz() {
    alert('ğŸ’¾ ä¿å­˜æ©Ÿèƒ½ã¯å®Ÿè£…ä¸­ã§ã™');
  }
  
  function previewQuiz() {
    alert('â–¶ï¸ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã¯å®Ÿè£…ä¸­ã§ã™');
  }
  
  // =====================================
  // æ›¸ãå‡ºã—æ©Ÿèƒ½
  // =====================================
  
  /**
   * ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ç‰ˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
   */
  function exportAllInOne() {
    console.log('ğŸ“¥ ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ç‰ˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰');
    
    if (!validateQuizData()) return;
    
    try {
      const html = generateWordPressHTMLWithCSS();
      downloadFile(html, 'quiz-allinone.html', 'text/html');
      alert('âœ… ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Œäº†ï¼\n\nquiz-allinone.html ã‚’WordPressã«ã‚³ãƒ”ãƒšã—ã¦ãã ã•ã„ã€‚');
    } catch (error) {
      console.error('âŒ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
      alert('âŒ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¤±æ•—: ' + error.message);
    }
  }
  
  /**
   * åˆ†é›¢ç‰ˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆ3ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
   */
  function exportSeparate() {
    console.log('ğŸ“¥ åˆ†é›¢ç‰ˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰');
    
    if (!validateQuizData()) return;
    
    try {
      downloadAllFiles();
    } catch (error) {
      console.error('âŒ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
      alert('âŒ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¤±æ•—: ' + error.message);
    }
  }
  
  /**
   * å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆ4ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
   */
  function exportAll() {
    console.log('ğŸ“¥ å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰');
    
    if (!validateQuizData()) return;
    
    try {
      downloadAllFilesWithOptions();
    } catch (error) {
      console.error('âŒ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
      alert('âŒ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¤±æ•—: ' + error.message);
    }
  }
  
  /**
   * ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   */
  function validateQuizData() {
    if (!quizData.questions || quizData.questions.length === 0) {
      alert('âš ï¸ å•é¡ŒãŒ1ã¤ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚\n\nå…ˆã«å•é¡Œã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚');
      return false;
    }
    return true;
  }
  
  /**
   * æ›¸ãå‡ºã—ã‚¿ãƒ–ã®ã‚¯ã‚¤ã‚ºæƒ…å ±ã‚’æ›´æ–°
   */
  function updateExportInfo() {
    if (!quizData || !quizData.questions) return;
    
    const choiceCount = quizData.questions.filter(q => q.type === 'choice').length;
    const textCount = quizData.questions.filter(q => q.type === 'text').length;
    
    const titleElement = document.getElementById('export-title');
    const countElement = document.getElementById('export-count');
    const choiceCountElement = document.getElementById('export-choice-count');
    const textCountElement = document.getElementById('export-text-count');
    
    if (titleElement) titleElement.textContent = quizData.meta.title || 'ï¼ˆæœªè¨­å®šï¼‰';
    if (countElement) countElement.textContent = quizData.questions.length + 'å•';
    if (choiceCountElement) choiceCountElement.textContent = choiceCount + 'å•';
    if (textCountElement) textCountElement.textContent = textCount + 'å•';
  }
  
  // =====================================
  // åˆæœŸåŒ–
  // =====================================
  document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸ¬ ãƒ“ãƒ«ãƒ€ãƒ¼åˆæœŸåŒ–');
    
    // quizDataã®ç¢ºèª
    if (typeof quizData === 'undefined') {
      console.error('âŒ quizDataãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“');
      alert('ã‚¨ãƒ©ãƒ¼: data.jsãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“');
      return;
    }
    
    // renderQuestionListã®ç¢ºèª
    if (typeof renderQuestionList === 'undefined') {
      console.error('âŒ renderQuestionListãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“');
      alert('ã‚¨ãƒ©ãƒ¼: builder.jsãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“');
      return;
    }
    
    console.log('âœ… å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒå…¨ã¦èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™');
    
    // å•é¡Œãƒªã‚¹ãƒˆã‚’è¡¨ç¤º
    renderQuestionList();
    
    // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›´æ–°
    updatePreview();
    
    // æ›¸ãå‡ºã—æƒ…å ±ã‚’æ›´æ–°
    updateExportInfo();
    
    console.log('âœ… ãƒ“ãƒ«ãƒ€ãƒ¼åˆæœŸåŒ–å®Œäº†');
  });
</script>
</body>
</html>